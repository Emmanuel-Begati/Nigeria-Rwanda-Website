{%load static %}
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title> Nigeria-Rwanda Friendship Club</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Audiowide">
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.3/css/all.css">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Sofia&effect=neon|outline|emboss|shadow-multiple|3d">

	<link href="{% static '/website/main.css' %}" rel="stylesheet">
	</head>
	<body>
<nav class=" navbar navbar-expand-lg navbar-light fixed-top" >			
	<!-- start of container -->
	
	<div class="nig">
	<a class="navbar-brand" href="#">
				
		<h3 class="logo-nig" ><img src="{% static 'website/IMG-20230410-WA0175.jpg' %}"  alt="Logo" id="logo">
				 Nigeria-Rwanda Friendship Club</h3> </a>
			</div>
				<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
			  <span class="navbar-toggler-icon"></span>
			</button>
		

			 <div class="collapse navbar-collapse" id="navbarNav">
				<!-- start of naviagtion  -->
				<div class="begati">
				  <ul class="navbar-nav mr-auto">
				<li class="nav-item active">
				  <a class="nav-link" href="{% url 'website-home' %}">Home</a>
				</li>
				<li class="nav-item active">
				  <a class="nav-link" href="{% url 'website-about' %}">About</a>
				</li>
				<li class="nav-item active">
				  <a class="nav-link" href="{% url 'website-contact' %}">Contact Us</a>
				</li>
				<li class="nav-item active">
				  <a class="nav-link" href="{% url 'website-resources' %}">Resources</a>
				</li>
			</ul>
			</div>
		</div>

			<div id="newsletter-btn">
				
				<a href="javascript:void(0)" class="newsletter-btn-link" id="newsletter-link">
				  Subscribe to our monthly newsletter
				</a>
			  </div>
			  {% if messages %}
			  <div class="container col-md-4 " >
				
				{%for message in messages%}
					<div class="alert alert-success">
						{{ message }}
					</div>
				{% endfor %}
			</div>
			{% endif %}
			
			<div class="sign-in-up" >
				<ul class="navbar-nav ml-auto">
					{% if user.is_authenticated %}
					<li class="nav-item">
						<form method="post">
							{% csrf_token %}
							<div class="btn-group" role="group">
								<a class="btn btn-success" href="{% url 'website-profile' %}">Profile</a>
								<a class="btn btn-success" href="{% url 'website-logout' %}">Logout</a>
							</div>
						</form>
					</li>
					  
					</li>
				  {% else %}
					<li class="nav-item">
					  <a class="nav-link btn btn-success" href="{% url 'website-login' %}">Login/Register</a>
					</li>
				  {% endif %}
				</ul>
			</div>
			  <!-- END OF THE CONTAINER -->
		</nav>	
		
		<div id="whole">  
				
				
			  {% block content %} {% endblock %}
			  </div>
			 
			<footer class="text-light py-3" id="footer">
				<div class="container">
				  <div class="row">
					<div class="col-md-4" id="career">
					  <h4>Career</h4>
					  <ul class="list-unstyled">
						<li><a href="#">Job openings</a></li>
						<li><a href="#">Submit your resume</a></li>
						<li><a href="#">Benefits</a></li>
					  </ul>
					</div>
					<div class="col-md-4" id="career">
					  <h4>Become a member</h4>
					  <ul class="list-unstyled">
						<li><a href="#">Sign up</a></li>
						<li><a href="#">Membership benefits</a></li>
						<!-- <li><a href="#">Membership fees</a></li> -->
					  </ul>
					</div>
					<div class="col-md-4" id="career">
					  <h4>Contact us</h4>
					  <p>Phone: +25079170115<br>Email: support@nigeriarwandaclub.com</p>
					  					
					</div>
					
				  </div>

				  <div class="row align-items-end" style="text-align: right;">
					<h6 >connect to us on out social media:</h6>
					<div class="d-flex justify-content-end">
						
						<!-- Facebook -->
					<a class="btn btn-primary" style="background-color: #3b5998;" href="http://facebook.com/nigrwafriendshipclub" role="button"
					><i class="fab fa-facebook-f"></i
					></a>

							<!-- Twitter -->
					<a class="btn btn-primary" style="background-color: #55acee;" href="https://twitter.com/NigRwaclub?t=fYe_gh0dGsRwjmscUiHqaw&s=09" role="button"
					><i class="fab fa-twitter"></i
					></a>

							<!-- Youtube -->
					<a class="btn btn-primary" style="background-color: #ed302f;" href="https://www.youtube.com/@Nigeria-RwandaFriendshipClub" role="button"
					><i class="fab fa-youtube"></i
					></a>
							<!-- Instagram -->
					<a class="btn btn-primary" style="background-color: #ac2bac;" href="https://instagram.com/nigrwafrienshipclub?igshid=ZDdkNTZiNTM=" role="button"
					><i class="fab fa-instagram"></i
					></a>

					</div>
					</div>
					</div>
					<div class="text-center p-3" style="background-color: rgba(0, 0, 0, 0.2);">
						Â© N i g e r i a-R w a n d a   F r i e n d s h i p    C l u b
					  </div>
			  </footer>
		</div>
		</div>
		<script src="https://code.jquery.com/jquery-3.6.0.min.js" ></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/2.9.3/umd/popper.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.1.3/js/bootstrap.min.js" ></script>
		<script>
					window.onscroll = function() {myFunction()};

		function myFunction() {
		var element = document.getElementById("navbar");
		if (window.pageYOffset >= 100) {
			element.classList.add("sticky", "logo-sticky");
		} else {
			setTimeout(() => {
		element.classList.remove('sticky')
    }, 200); 
  }
}


		</script>
		<script>
			// Get the newsletter button element
			var newsletterBtn = document.getElementById("newsletter-btn");
		
			// Add a click event listener to the newsletter button
			newsletterBtn.addEventListener("click", function(event) {
				// Prevent the default behavior of the link
				event.preventDefault();
		
				// Show the newsletter form pop-up
				showNewsletterForm();
			});
		
			// Function to show the newsletter form pop-up
			function showNewsletterForm() {
				// Create the pop-up element
				var newsletterPopup = document.createElement("div");
				newsletterPopup.setAttribute("id", "newsletter-popup");
		
				// Create the form element
				var newsletterForm = document.createElement("form");
				newsletterForm.setAttribute("id", "newsletter-form");
				newsletterForm.setAttribute("method", "POST");
				newsletterForm.setAttribute("action", "{% url 'newsletter_signup' %}");
		
				// Create the CSRF token input field
				var csrfInput = document.createElement("input");
				csrfInput.setAttribute("type", "hidden");
				csrfInput.setAttribute("name", "csrfmiddlewaretoken");
				csrfInput.setAttribute("value", getCookie("csrftoken"));
		
				// Create the email input field
				var emailInput = document.createElement("input");
				emailInput.setAttribute("type", "email");
				emailInput.setAttribute("name", "email");
				emailInput.setAttribute("placeholder", "Enter your email address");
				emailInput.setAttribute("required", "");
		
				// Create the submit button
				var submitBtn = document.createElement("button");
				submitBtn.setAttribute("type", "submit");
				submitBtn.innerHTML = "Subscribe";
		
				// Create the close button
				var closeBtn = document.createElement("button");
				closeBtn.setAttribute("type", "button");
				closeBtn.setAttribute("id", "close-btn");
				closeBtn.innerHTML = "&times;";
		
				// Add a click event listener to the close button
				closeBtn.addEventListener("click", function(event) {
					newsletterPopup.remove();
				});
		
				// Append the CSRF token, email input, submit button, and close button to the form
				newsletterForm.appendChild(csrfInput);
				newsletterForm.appendChild(emailInput);
				newsletterForm.appendChild(submitBtn);
				newsletterForm.appendChild(closeBtn);
		
				// Append the form to the pop-up element
				newsletterPopup.appendChild(newsletterForm);
		
				// Add the pop-up element to the page
				document.body.appendChild(newsletterPopup);
				
				// Add an event listener to the form submission
				newsletterForm.addEventListener("submit", function(event) {
					event.preventDefault();
					
					// Get the email value from the form
					var email = emailInput.value;
					
					// Send a GET request to the server to check if the email already exists
					var xhr = new XMLHttpRequest();
					xhr.open("GET", "{% url 'check_email' %}?email=" + email);
					xhr.onload = function() {
						if (xhr.status === 200) {
							var data = JSON.parse(xhr.responseText);
							if (data.exists) {
								// Show an error message on the pop-up
								var errorMessage = document.createElement("p");
								errorMessage.innerHTML = "This email address has already been subscribed.";
								errorMessage.setAttribute("class", "error-message");
								newsletterForm.insertBefore(errorMessage, submitBtn);
							} else {
								// Submit the form if the email does not already exist
								newsletterForm.submit();
							}
						}
					};
					xhr.send();
				});
			}

					// Function to retrieve the CSRF token from the cookie
					function getCookie(name) {
					var cookieValue = null;
					if (document.cookie && document.cookie !== "") {
						var cookies = document.cookie.split(";");
						for (var i = 0; i < cookies.length; i++) {
						var cookie = cookies[i].trim();
						if (cookie.substring(0, name.length + 1) === (name + "=")) {
							cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
							break;
						}
						}
					}
					return cookieValue;
					}
					
		  </script>
		  
		  
	  </body>
</html>
